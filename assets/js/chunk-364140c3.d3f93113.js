(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-364140c3"],{"0cb2":function(t,e,a){var r=a("e330"),s=a("7b0b"),i=Math.floor,n=r("".charAt),c=r("".replace),o=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,r,d,m){var h=a+t.length,g=r.length,f=u;return void 0!==d&&(d=s(d),f=l),c(m,f,(function(s,c){var l;switch(n(c,0)){case"$":return"$";case"&":return t;case"`":return o(e,0,a);case"'":return o(e,h);case"<":l=d[o(c,1,-1)];break;default:var u=+c;if(0===u)return s;if(u>g){var m=i(u/10);return 0===m?s:m<=g?void 0===r[m-1]?n(c,1):r[m-1]+n(c,1):s}l=r[u-1]}return void 0===l?"":l}))}},"14c3":function(t,e,a){var r=a("da84"),s=a("c65b"),i=a("825a"),n=a("1626"),c=a("c6b6"),o=a("9263"),l=r.TypeError;t.exports=function(t,e){var a=t.exec;if(n(a)){var r=s(a,t,e);return null!==r&&i(r),r}if("RegExp"===c(t))return s(o,t,e);throw l("RegExp#exec called on incompatible receiver")}},"159b":function(t,e,a){var r=a("da84"),s=a("fdbc"),i=a("785a"),n=a("17c2"),c=a("9112"),o=function(t){if(t&&t.forEach!==n)try{c(t,"forEach",n)}catch(e){t.forEach=n}};for(var l in s)s[l]&&o(r[l]&&r[l].prototype);o(i)},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,s=a("a640"),i=s("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},5319:function(t,e,a){"use strict";var r=a("2ba4"),s=a("c65b"),i=a("e330"),n=a("d784"),c=a("d039"),o=a("825a"),l=a("1626"),u=a("5926"),d=a("50c4"),m=a("577e"),h=a("1d80"),g=a("8aa5"),f=a("dc4a"),p=a("0cb2"),v=a("14c3"),b=a("b622"),w=b("replace"),y=Math.max,C=Math.min,$=i([].concat),x=i([].push),k=i("".indexOf),E=i("".slice),_=function(t){return void 0===t?t:String(t)},A=function(){return"$0"==="a".replace(/./,"$0")}(),O=function(){return!!/./[w]&&""===/./[w]("a","$0")}(),S=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));n("replace",(function(t,e,a){var i=O?"$":"$0";return[function(t,a){var r=h(this),i=void 0==t?void 0:f(t,w);return i?s(i,t,r,a):s(e,m(r),t,a)},function(t,s){var n=o(this),c=m(t);if("string"==typeof s&&-1===k(s,i)&&-1===k(s,"$<")){var h=a(e,n,c,s);if(h.done)return h.value}var f=l(s);f||(s=m(s));var b=n.global;if(b){var w=n.unicode;n.lastIndex=0}var A=[];while(1){var O=v(n,c);if(null===O)break;if(x(A,O),!b)break;var S=m(O[0]);""===S&&(n.lastIndex=g(c,d(n.lastIndex),w))}for(var T="",D=0,q=0;q<A.length;q++){O=A[q];for(var K=m(O[0]),F=y(C(u(O.index),c.length),0),R=[],I=1;I<O.length;I++)x(R,_(O[I]));var L=O.groups;if(f){var M=$([K],R,F,c);void 0!==L&&x(M,L);var N=m(r(s,void 0,M))}else N=p(K,c,F,R,L,s);F>=D&&(T+=E(c,D,F)+N,D=F+K.length)}return T+E(c,D)}]}),!S||!A||O)},"5f42":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-edit-container"},[a("div",{staticClass:"article-edit-bar"},[t.dark?a("span",{staticClass:"article-edit-bar-title article-edit-bar-title-dark"},[t._v(t._s(""===t.article.title?"新文章":t.article.title))]):a("span",{staticClass:"article-edit-bar-title article-edit-bar-title-light"},[t._v(t._s(""===t.article.title?"新文章":t.article.title))]),a("span",{staticClass:"article-edit-bar-operator"},[a("span",{staticClass:"article-edit-bar-operator-item"},[a("t-button",{attrs:{theme:"warning",variant:"dashed"},on:{click:t.openDrawer}},[t._v("附件")])],1),1!=t.article.status?a("span",{staticClass:"article-edit-bar-operator-item"},[a("t-button",{attrs:{theme:"danger",variant:"base"},on:{click:t.saveDraft}},[t._v("存为草稿")])],1):t._e(),0!=t.state?a("span",{staticClass:"article-edit-bar-operator-item"},[a("t-button",{attrs:{theme:"primary",variant:"base"},on:{click:t.handleUpdate}},[t._v("更新")])],1):t._e(),1!==t.state||0!==t.article.status?a("span",{staticClass:"article-edit-bar-operator-item"},[a("t-button",{attrs:{theme:"primary",variant:"base"},on:{click:t.handlePublish}},[t._v("发布")])],1):t._e()])]),a("div",{staticClass:"article-edit-title"},[a("t-input",{attrs:{size:"large",placeholder:"请输入标题"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),a("t-tabs",{attrs:{defaultValue:"basic"}},[a("t-tab-panel",{attrs:{value:"basic"},scopedSlots:t._u([{key:"label",fn:function(){return[a("icon",{staticStyle:{"margin-right":"4px"},attrs:{name:"setting"}}),t._v(" 基本设置 ")]},proxy:!0}])},[a("div",{staticClass:"basic-setting-form-container"},[a("t-form",{ref:"form",attrs:{labelAlign:"top",colon:!0}},[a("t-form-item",{attrs:{label:"文章别名",name:"slug",help:"http://alkaidchen.com/article/"+(""===t.article.slug?"{slug}":t.article.slug)}},[a("t-input",{attrs:{placeholder:"不填写则会默认使用标题拼音或文章id"},model:{value:t.article.slug,callback:function(e){t.$set(t.article,"slug",e)},expression:"article.slug"}})],1),a("t-form-item",{attrs:{label:"开启评论",name:"allowedComment"}},[a("t-switch",{model:{value:t.article.allowedComment,callback:function(e){t.$set(t.article,"allowedComment",e)},expression:"article.allowedComment"}})],1),a("t-form-item",{attrs:{label:"是否置顶",name:"isTop"}},[a("t-switch",{model:{value:t.article.isTop,callback:function(e){t.$set(t.article,"isTop",e)},expression:"article.isTop"}})],1),a("t-divider"),a("t-form-item",{attrs:{label:"分类",name:"category"}},[a("div",{staticClass:"category-container"},[a("t-checkbox-group",{attrs:{options:t.categoryOptions},model:{value:t.article.categories,callback:function(e){t.$set(t.article,"categories",e)},expression:"article.categories"}}),a("div",{staticClass:"create-category-container"},[a("div",{staticClass:"create-category-button-container"},[a("t-button",{directives:[{name:"show",rawName:"v-show",value:!t.showAddCategoryForm,expression:"!showAddCategoryForm"}],attrs:{theme:"primary"},on:{click:function(e){t.showAddCategoryForm=!0}}},[a("add-icon",{attrs:{slot:"icon",size:"200px"},slot:"icon"}),t._v(" 新建 ")],1)],1),a("div",{staticClass:"create-category-form-container"},[a("t-form",{directives:[{name:"show",rawName:"v-show",value:t.showAddCategoryForm,expression:"showAddCategoryForm"}],ref:"form",attrs:{data:t.newCategory,scrollToFirstError:"smooth",labelWidth:"0"}},[a("div",{staticClass:"create-category-form-item"},[a("t-form-item",{attrs:{name:"name"}},[a("t-input",{attrs:{placeholder:"分类名称"},model:{value:t.newCategory.name,callback:function(e){t.$set(t.newCategory,"name",e)},expression:"newCategory.name"}})],1)],1),a("div",{staticClass:"create-category-form-item"},[a("t-form-item",{attrs:{name:"slug",help:"http://alkaidchen.com/category/"+(""===t.newCategory.slug?"{slug}":t.newCategory.slug)}},[a("t-input",{attrs:{placeholder:"分类别名"},model:{value:t.newCategory.slug,callback:function(e){t.$set(t.newCategory,"slug",e)},expression:"newCategory.slug"}})],1)],1),a("div",{staticClass:"create-category-form-item"},[a("t-form-item",[a("t-button",{staticStyle:{"margin-right":"10px"},attrs:{theme:"primary"},on:{click:t.handleCreateCategory}},[t._v("保存")]),a("t-button",{staticStyle:{"margin-right":"10px"},attrs:{theme:"default",variant:"base"},on:{click:t.cancelCreateCategory}},[t._v("取消")])],1)],1)])],1)])],1)]),a("t-divider"),a("t-form-item",{attrs:{label:"标签",name:"tags"}},[a("t-select",{attrs:{creatable:"",filterable:"",multiple:"",minCollapsedNum:3,options:t.tagOptions},on:{create:t.handleCreateTag},model:{value:t.article.tags,callback:function(e){t.$set(t.article,"tags",e)},expression:"article.tags"}})],1),a("t-form-item",{attrs:{label:"摘要",name:"summary"}},[a("t-textarea",{attrs:{placeholder:"若不填写，将会从文章中自动截取",name:"summary",autosize:{minRows:6}},model:{value:t.article.summary,callback:function(e){t.$set(t.article,"summary",e)},expression:"article.summary"}})],1),a("t-form-item",{attrs:{label:"封面图",name:"cover"}},[a("div",{staticClass:"article-cover-setting"},[a("div",{staticClass:"article-cover-preview"},[a("img",{attrs:{src:""===t.article.cover?"http://119.91.26.252:8090/images/placeholder.jpg":t.article.cover}})]),a("div",{staticClass:"article-cover-input"},[a("t-input",{attrs:{clearable:"",placeholder:"点击封面选择图片，或者输入外部链接"},model:{value:t.article.cover,callback:function(e){t.$set(t.article,"cover",e)},expression:"article.cover"}})],1)])])],1)],1)]),a("t-tab-panel",{attrs:{value:"advanced"},scopedSlots:t._u([{key:"label",fn:function(){return[a("icon",{staticStyle:{"margin-right":"4px"},attrs:{name:"internet"}}),t._v(" 高级设置 ")]},proxy:!0}])},[a("div",{staticClass:"advanced-setting-form-container"},[a("t-form",{ref:"form",attrs:{labelAlign:"top",colon:!0}},[a("t-form-item",{attrs:{label:"访问密码",name:"password"}},[a("t-input",{attrs:{type:"password",placeholder:""},model:{value:t.article.password,callback:function(e){t.$set(t.article,"password",e)},expression:"article.password"}})],1),a("t-form-item",{attrs:{label:"SEO 关键字",name:"keywords"}},[a("t-select",{attrs:{creatable:"",filterable:"",multiple:"",placeholder:"若不填写，将使用标签作为关键字",options:t.seoKeywordOptions,minCollapsedNum:3},on:{create:t.createSEOKeyword},model:{value:t.article.seoKeywords,callback:function(e){t.$set(t.article,"seoKeywords",e)},expression:"article.seoKeywords"}})],1),a("t-form-item",{attrs:{label:"SEO 描述",name:"description"}},[a("t-textarea",{attrs:{placeholder:"若不填写，将使用摘要作为描述",name:"seoDescription",autosize:{minRows:6}},model:{value:t.article.seoDescription,callback:function(e){t.$set(t.article,"seoDescription",e)},expression:"article.seoDescription"}})],1)],1)],1)])],1)],1)},s=[],i=(a("b0c0"),a("ac1f"),a("5319"),a("a434"),a("d3b7"),a("159b"),a("f646")),n=a("4a79"),c={name:"ArticleEdit",beforeRouteEnter:function(t,e,a){var r=this,s=t.query.articleID;a((function(t){s&&(t.state=1,t.$request.get("article/"+s).then((function(e){console.log("res:",e),t.article=e.data})).catch((function(){r.$message.warning("获取文章失败")})))}))},data:function(){return{dark:!1,state:0,article:{title:"",originalContent:"",formatContent:"",slug:"",allowedComment:!0,isTop:!1,categories:[],tags:[],summary:"",cover:"",password:"",wordCount:0,seoKeywords:[],seoDescription:"",status:0},categoryOptions:[],tagOptions:[],seoKeywordOptions:[],showAddCategoryForm:!1,newCategory:{name:"",slug:""}}},methods:{saveDraft:function(){var t=this;""!==this.article.title?0===this.state?(this.article.status=1,this.$request.post("article",this.article).then((function(e){0===e.status&&(t.$message.success("保存成功"),t.$router.push({name:"ArticleList"}))})).catch((function(){t.$message.warning("保存失败")}))):(this.article.status=1,this.$request.put("article/"+this.article.id,this.article).then((function(e){0===e.status&&(t.$message.success("保存成功"),t.$router.push({name:"ArticleList"}))})).catch((function(){t.$message.warning("保存失败")}))):this.$message.warning("文章标题不能为空")},openDrawer:function(){this.$store.commit("OPEN_ATTACH_LIST_DRAWER")},handleUpdate:function(){var t=this;""!==this.article.title?this.$request.put("article/"+this.article.id,this.article).then((function(e){0===e.status&&(t.$message.success("更新成功"),t.$router.push({name:"ArticleList"}))})).catch((function(){t.$message.warning("更新失败")})):this.$message.warning("文章标题不能为空")},handlePublish:function(){var t=this;""!==this.article.title?(this.article.status=0,0===this.state?this.$request.post("article",this.article).then((function(e){0===e.status&&(t.$message.success("发布成功"),t.$router.push({name:"ArticleList"}))})).catch((function(){t.$message.warning("发布失败")})):this.$request.put("article/"+this.article.id,this.article).then((function(e){0===e.status&&(t.$message.success("发布成功"),t.$router.push({name:"ArticleList"}))})).catch((function(){t.$message.warning("发布失败")}))):this.$message.warning("文章标题不能为空")},handleCreateCategory:function(){var t=this;this.newCategory.name=this.newCategory.name.replace(/\s*/g,""),this.newCategory.slug=this.newCategory.slug.replace(/\s*/g,""),""!==this.newCategory.name?""!==this.newCategory.slug?this.$request.post("category",this.newCategory).then((function(e){0===e.status&&(t.$message.success("创建分类成功"),t.categoryOptions.push({value:e.data.id,label:e.data.name}),t.cancelCreateCategory())})).catch((function(){t.$message.warning("创建分类失败")})):this.$message.warning("分类别名不能为空"):this.$message.warning("分类名称不能为空")},cancelCreateCategory:function(){this.newCategory.name="",this.newCategory.slug="",this.showAddCategoryForm=!1},handleCreateTag:function(t){var e=this;if(t=t.replace(/\s*/g,""),""!==t){var a={name:t,slug:t};this.$request.post("tag",a).then((function(a){e.$message.success("创建标签成功"),e.tagOptions.push({value:a.data.id,label:a.data.name}),e.article.tags.splice(e.article.tags.indexOf(t),1),e.article.tags.push(a.data.id)})).catch((function(){e.article.tags.splice(e.article.tags.indexOf(t),1),e.$message.error("创建标签失败")}))}else this.$message.warning("标签不能为空")},createSEOKeyword:function(t){this.seoKeywordOptions.push({value:t,label:t})}},components:{Icon:i["a"],AddIcon:n["a"]},mounted:function(){var t=this;this.$request.get("categories").then((function(e){e.data.forEach((function(e){t.categoryOptions.push({value:e.id,label:e.name})}))})),this.$request.get("tags").then((function(e){e.data.forEach((function(e){t.tagOptions.push({value:e.id,label:e.name})}))}))},watch:{"$store.state.app.isDark":{deep:!0,handler:function(t){this.dark=!!t}}}},o=c,l=(a("d059"),a("2877")),u=Object(l["a"])(o,r,s,!1,null,"4165bd0d",null);e["default"]=u.exports},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},a434:function(t,e,a){"use strict";var r=a("23e7"),s=a("da84"),i=a("23cb"),n=a("5926"),c=a("07fa"),o=a("7b0b"),l=a("65f0"),u=a("8418"),d=a("1dde"),m=d("splice"),h=s.TypeError,g=Math.max,f=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m},{splice:function(t,e){var a,r,s,d,m,b,w=o(this),y=c(w),C=i(t,y),$=arguments.length;if(0===$?a=r=0:1===$?(a=0,r=y-C):(a=$-2,r=f(g(n(e),0),y-C)),y+a-r>p)throw h(v);for(s=l(w,r),d=0;d<r;d++)m=C+d,m in w&&u(s,d,w[m]);if(s.length=r,a<r){for(d=C;d<y-r;d++)m=d+r,b=d+a,m in w?w[b]=w[m]:delete w[b];for(d=y;d>y-r+a;d--)delete w[d-1]}else if(a>r)for(d=y-r;d>C;d--)m=d+r-1,b=d+a-1,m in w?w[b]=w[m]:delete w[b];for(d=0;d<a;d++)w[d+C]=arguments[d+2];return w.length=y-r+a,s}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},d059:function(t,e,a){"use strict";a("de26")},d784:function(t,e,a){"use strict";a("ac1f");var r=a("e330"),s=a("6eeb"),i=a("9263"),n=a("d039"),c=a("b622"),o=a("9112"),l=c("species"),u=RegExp.prototype;t.exports=function(t,e,a,d){var m=c(t),h=!n((function(){var e={};return e[m]=function(){return 7},7!=""[t](e)})),g=h&&!n((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[m]=/./[m]),a.exec=function(){return e=!0,null},a[m](""),!e}));if(!h||!g||a){var f=r(/./[m]),p=e(m,""[t],(function(t,e,a,s,n){var c=r(t),o=e.exec;return o===i||o===u.exec?h&&!n?{done:!0,value:f(e,a,s)}:{done:!0,value:c(a,e,s)}:{done:!1}}));s(String.prototype,t,p[0]),s(u,m,p[1])}d&&o(u[m],"sham",!0)}},de26:function(t,e,a){}}]);
//# sourceMappingURL=chunk-364140c3.d3f93113.js.map